{% extends 'user-base.html' %}
{% load procurement_tags %}

{% block content %}
<div class="container-fluid  p-0">
	<div class="bg-info p-2 shadow fixed d-flex">
        <div class="flex-fill m-auto">
            <h4 class="text-light">Create Plan</h4>
        </div>
    </div>

	<div class="login-content">
		<form method="POST" action="{% url 'planning:create_plan' %}">
			{{ form.errors }}

			{% csrf_token %}

			<div class="form-group">
				<small>Expense Category (COA)</small>
				{{ form.chart_of_account|add_css:"form-control" }}
			</div>

			<div class="form-group">
				<small>Subject of Procurement</small>
				{{ form.subject_of_procurement|add_css:"form-control" }}
			</div>

			<div class="form-group">
				<small>Quantity</small>
				{{ form.quantity|add_css:"form-control" }}
			</div>

			<div class="form-group">
				<small>Unit of measure</small>
				{{ form.unit_of_measure|add_css:"form-control" }}
			</div>

			<div class="form-group">
				<small>Estimated Cost</small>
				{{ form.estimated_cost|add_css:"form-control" }}
			</div>

			<div class="form-group">
				<small>Source of Funding</small>
				<div class="form-control" style="height: auto">
					{% for radio in form.source_of_funding %}
						<div>
							{{ radio }}
						</div>
					{% endfor %}
					<small class="text-info">Specify Funder</small>
					{{ form.other_funder|add_attrs:'{"id":"id_other_funder", "class":"form-control"}' }}
					<script type="text/javascript">
						$('.source_of_funding_radio').on('change', (e)=>{
							if (e.target.value == "0") {
								$('#id_other_funder').val('').attr('disabled', false)
							}else{
								$('#id_other_funder').val('').attr('disabled', true)
							}
						})
					</script>
				</div>
			</div>

			<div class="form-group">
				<small>Date Rquired</small>
				<div class="row border m-0 rounded p-3">
					<div class="custom-control custom-checkbox col-md-6">
						{{ form.date_required_q1|add_attrs:'{"class":"custom-control-input", "id":"q1"}' }}
						<label class="custom-control-label" for="q1">Quarter 1 <small>(Jul, Aug, Sep)</small></label>
					</div>
					<div class="custom-control custom-checkbox col-md-6">
						{{ form.date_required_q2|add_attrs:'{"class":"custom-control-input", "id":"q2"}' }}
						<label class="custom-control-label" for="q2">Quarter 2 <small>(Oct, Nov, Dec)</small></label>
					</div>
					<div class="custom-control custom-checkbox col-md-6">
						{{ form.date_required_q3|add_attrs:'{"class":"custom-control-input", "id":"q3"}' }}
						<label class="custom-control-label" for="q3">Quarter 3 <small>(Jan, Feb, March)</small></label>
					</div>
					<div class="custom-control custom-checkbox col-md-6">
						{{ form.date_required_q4|add_attrs:'{"class":"custom-control-input", "id":"q4"}' }}
						<label class="custom-control-label" for="q4">Quarter 4 <small>(Apr, May, Jun)</small></label>
					</div>
				</div>
			</div>

			<hr>
			<div class="form-group">
				<button type="submit" class="btn btn-block btn-info" name="submit">Add Plan</button>
			</div>
		</form>
	</div>
</div> 
{% endblock %}